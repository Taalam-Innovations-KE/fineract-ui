services:
  fineract-ui:
    image: taalamke/taalam-fincore-web:latest
    container_name: fineract-ui
    restart: unless-stopped
    expose:
      - "3000"
    environment:
      NODE_ENV: "production"
      AUTH_URL: "https://your-ui-domain.example"
      NEXTAUTH_URL: "https://your-ui-domain.example"
      AUTH_SECRET: "replace-with-strong-secret"
      FINERACT_BASE_URL: "https://your-fineract-domain.example/fineract-provider/api"
      FINERACT_USERNAME: "mifos"
      FINERACT_PASSWORD: "password"
      AUTH_KEYCLOAK_ID: "your-keycloak-client-id"
      AUTH_KEYCLOAK_SECRET: "your-keycloak-client-secret"
      AUTH_KEYCLOAK_ISSUER: "https://your-keycloak-domain.example/realms/your-realm"
    networks:
      - fincore

  nginx:
    image: nginx:1.27-alpine
    container_name: fincore-nginx
    restart: unless-stopped
    depends_on:
      - fineract-ui
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/fincore.conf:/etc/nginx/conf.d/fincore.conf:ro
      - ./nginx/certs:/etc/nginx/certs:ro
      - ./nginx/certbot:/var/www/certbot
    networks:
      - fincore

networks:
  fincore:
    driver: bridge
